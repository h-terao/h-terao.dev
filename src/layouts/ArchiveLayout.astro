---
import type { CollectionEntry } from "astro:content";
import type { Page } from "astro";
import { Icon } from "astro-iconify";
import BlogCard from "@/components/BlogCard.astro";
import Pagination from "@/components/Pagination.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
import type { Tag } from "@/types.ts";

type Props = {
  title: string;
  page: Page<CollectionEntry<"blog">>;
  tags: Tag[];
};

const { title, page, tags } = Astro.props;
---
<BaseLayout>
  <h1 class="text-3xl text-left text-headline font-headline font-bold">{ title }</h1>
  <div class="flex flex-row justify-between gap-12 mt-4">
    <!-- Blog cards -->
    <div class="flex flex-col w-full gap-6">
      <div class="text-lg text-left text-body/60">
        Page {page.currentPage} of {page.lastPage} - {page.data.length} posts
      </div>
      {page.data.map((entry) => (<BlogCard entry={entry} class="w-auto"/>))}
      <Pagination page={page} class="mt-4 mb-2"/>
    </div>

    <!-- Tags -->
    <div class="w-80 max-w-full hidden lg:block text-headline">
      <div class="text-2xl font-bold mb-4 flex flex-row items-center gap-1">
        <Icon name="iconoir:hashtag" class="size-5" />
        <h2>Tags</h2>
      </div>
      <div class="flex flex-wrap gap-x-4 gap-y-2 mb-2">
        {tags.map((tag) => (
          <a
            href={tag.link}
            class="block font-semibold text-base text-body hover:text-primary"
          >
            {tag.name}
          </a>
        ))}
      </div>
    </div>
  </div>
</BaseLayout>