---
import type { CollectionEntry } from "astro:content";
import type { GetStaticPaths, Page } from "astro";
import { pageSize } from "@/constants.ts";
import ArchiveLayout from "@/layouts/ArchiveLayout.astro";
import { getEntries, getTags } from "@/lib";
import type { Tag } from "@/types.ts";

export const getStaticPaths: GetStaticPaths = async ({ paginate }) => {
  const allEntries = await getEntries("blog");
  const tags = getTags(allEntries);
  return paginate(allEntries, { pageSize, props: { tags } });
};

type Props = {
  page: Page<CollectionEntry<"blog">>;
  tags: Tag[];
};

const { page, tags } = Astro.props;
---
<ArchiveLayout title="Blog" page={page} tags={tags} />